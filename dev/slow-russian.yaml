components:
- type: function
  name: page-scraper
  api:
    method: POST
- type: function
  name: index-fetcher  
  api:
    method: GET
- type: function
  name: vocab-translator
  permissions:
  - "translate:*"
  api:
    method: POST
- type: bucket
  name: content
  website: true
- type: function
  name: markdown-parser  
  src:
    type: bucket
    name: content
    path: markdown
  dest:
    type: bucket
    name: content
    path: posts
- type: table
  name: content
  fields:
  - name: normalised_title
    type: string
    primary: true
- type: function
  name: page-indexer
  src:
    type: bucket
    name: content
    path: posts
  dest:
    type: table
    name: content
- type: queue
  name: audio
  batch: 1
- type: function
  name: audio-batcher
  src:
    type: table
    name: content
  dest:
    type: queue
    name: audio
- type: function
  name: audio-generator
  permissions:
  - "polly:*"
  src:
    type: queue
    name: audio
  dest:
    type: bucket
    name: content
    path: audio
