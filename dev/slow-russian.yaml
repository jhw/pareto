components:
- type: api
  name: page-scraper
  method: POST
- type: api
  name: index-fetcher  
  method: GET
- type: api
  name: vocab-translator
  permissions:
  - "translate:*"
  method: POST
- type: bucket
  name: content
  website: true
- type: action
  name: markdown-parser  
  trigger:
    type: bucket
    name: content
    path: markdown
  target:
    type: bucket
    name: content
- type: table
  name: content
  fields:
  - name: normalised-title
    type: string
    primary: true
- type: action
  name: page-indexer
  trigger:
    type: bucket
    name: content
    path: posts
  target:
    type: table
    name: content
- type: queue
  name: audio
  batch: 1
- type: action
  name: audio-batcher
  trigger:
    type: table
    name: content
  target:
    type: queue
    name: audio
- type: action
  name: audio-generator
  permissions:
  - "polly:*"
  trigger:
    type: queue
    name: audio
  target:
    type: bucket
    name: content

