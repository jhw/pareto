---
globals:
  app: pareto-demo
  src: demo
  bucket: wol-deployments
  runtime: "3.7"
components:
  secrets:
    - name: foo
      value: bar
  userpools:
    - name: hello-pool
  layers:
    - name: hello-layer
      packages:
        - name: lxml
        - name: pymorphy2
          version: "0.8"
  services:
    - name: hello-service-fn
  actions:
    - name: hello-get-fn
      layers:
        - hello-layer
      services:
        - hello-service-fn
    - name: hello-post-fn
    - name: hello-bucket-fn
      permissions:
        - translate:TranslateText
    - name: hello-table-fn
      permissions:
        - polly:SynthesizeSpeech
    - name: hello-timer-fn
    - name: hello-queue-fn
  apis:
    - name: hello-api
      resources:
        - name: hello-get
          method: GET
          params:
            - msg
          action: hello-get-fn
          userpool: hello-pool
        - name: hello-post
          method: POST
          schema:
            type: object
            properties:
              msg:
                type: string
            required:
              - msg
          action: hello-post-fn
  buckets:
    - name: hello-bucket
      actions:
        - name: hello-bucket-fn
          path: foobar
      website: true
  queues:
    - name: hello-queue
      batch: 1
      action: hello-queue-fn
  tables:
    - name: hello-table
      fields:
        - name: my-hash
          type: string
          primary: true
      action: hello-table-fn
  timers:
    - name: hello-timer
      rate: "1 hour"
      payload:
        hello: world
      action: hello-timer-fn
